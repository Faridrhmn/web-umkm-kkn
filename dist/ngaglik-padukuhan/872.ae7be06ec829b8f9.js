"use strict";(self.webpackChunkngaglik_padukuhan=self.webpackChunkngaglik_padukuhan||[]).push([[872],{9872:(U,p,r)=>{r.r(p),r.d(p,{LoginModule:()=>A});var L=r(6895),g=r(9299),f=r(5861),s=r(4006),C=r(259),m=r(7396),Z=r(6985),T=r(5226),i=r.n(T),n=r(4650),h=r(4859),y=r(3546),b=r(7392),k=r(4144),c=r(9549);const M=[{path:"",component:(()=>{class o{constructor(t,e){this.fb=t,this.router=e,this.hide=!0,this.loginForm=this.initFormGroup()}initFormGroup(){return this.fb.group({username:["",[s.kI.required]],password:["",[s.kI.required]]})}login(){var t=this;return(0,f.Z)(function*(){const e=t.loginForm.value;if(t.loginForm.invalid)t.onError("null");else{i().fire({didOpen:()=>{i().showLoading()},title:"Sedang Memuat...",text:"Harap tunggu sebentar"});const a=(0,C.ZF)(Z.N.firebase),l=(0,m.ad)(a),u=(0,m.IO)((0,m.hJ)(l,"users"),(0,m.ar)("username","==",e.username)),v=yield(0,m.PL)(u);if(v.size>0){const O=yield t.hashPassword(e.password);v.forEach(w=>{O===w.data().password?t.onSuccess(w):t.onError("password")})}else t.onError("username")}})()}onSuccess(t){const e=i().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:l=>{l.addEventListener("mouseenter",i().stopTimer),l.addEventListener("mouseleave",i().resumeTimer)}});localStorage.setItem("login-token",this.generateToken(12)),i().close(),e.fire({icon:"success",title:"Login Berhasil!"});const a={username:t.data().username,fullname:t.data().fullname,role:t.data().role,id:t.id,password:t.data().password};localStorage.setItem("user",JSON.stringify(a)),this.router.navigate(["/"])}onError(t){switch(i().close(),t){case"username":i().fire({icon:"error",title:"Login Gagal!",text:"Username tidak ditemukan"});break;case"null":i().fire({icon:"error",title:"Login Gagal!",text:"Username dan Password tidak boleh kosong"});break;case"password":i().fire({icon:"error",title:"Login Gagal!",text:"Username atau Password salah"})}}generateToken(t){let e="";const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=a.length;let u=0;for(;u<t;)e+=a.charAt(Math.floor(Math.random()*l)),u+=1;return e}handleKeyPress(t){console.log("\n"==t?"true":"false")}hashPassword(t){return(0,f.Z)(function*(){const a=(new TextEncoder).encode(t),l=yield crypto.subtle.digest("SHA-256",a);return Array.from(new Uint8Array(l)).map(u=>u.toString(16).padStart(2,"0")).join("")})()}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(s.qu),n.Y36(g.F0))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-login"]],decls:24,vars:5,consts:[[1,"login-container"],[3,"formGroup"],[2,"font-size","32px","text-align","center"],[2,"text-align","center"],["appearance","fill"],["matInput","","placeholder","Username","formControlName","username",3,"keyup.enter"],["matSuffix",""],["matInput","","placeholder","Password","formControlName","password",3,"type","keyup.enter"],["password",""],["mat-icon-button","","matSuffix","",3,"click"],["mat-flat-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(n.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-content",1)(3,"h1",2),n._uU(4,"Admin Web Dusun Tanjungrejo"),n.qZA(),n.TgZ(5,"h1",3),n._uU(6,"Login"),n.qZA(),n.TgZ(7,"mat-form-field",4)(8,"mat-label"),n._uU(9,"Username"),n.qZA(),n.TgZ(10,"input",5),n.NdJ("keyup.enter",function(){return e.login()}),n.qZA(),n.TgZ(11,"mat-icon",6),n._uU(12,"person"),n.qZA(),n._UZ(13,"mat-hint"),n.qZA(),n.TgZ(14,"mat-form-field",4)(15,"mat-label"),n._uU(16,"Password"),n.qZA(),n.TgZ(17,"input",7,8),n.NdJ("keyup.enter",function(){return e.login()}),n.qZA(),n.TgZ(19,"button",9),n.NdJ("click",function(){return e.hide=!e.hide}),n.TgZ(20,"mat-icon"),n._uU(21),n.qZA()()(),n.TgZ(22,"button",10),n.NdJ("click",function(){return e.login()}),n._uU(23,"LOGIN"),n.qZA()()()()),2&t&&(n.xp6(2),n.Q6J("formGroup",e.loginForm),n.xp6(15),n.Q6J("type",e.hide?"password":"text"),n.xp6(2),n.uIk("aria-label","Hide password")("aria-pressed",e.hide),n.xp6(2),n.Oqu(e.hide?"visibility_off":"visibility"))},dependencies:[h.lW,h.RK,y.a8,y.dn,b.Hw,k.Nt,c.KE,c.hX,c.bx,c.R9,s.Fj,s.JJ,s.JL,s.sg,s.u],styles:['@import"https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap";*[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:not(mat-icon){font-family:Ubuntu,Helvetica Neue,sans-serif}.login-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:flex;background-image:url(/assets/images/bg.png);background-size:cover;background-position:bottom center;align-items:center;justify-content:center}mat-card[_ngcontent-%COMP%]{width:32vw;min-width:32vw;padding:32px;opacity:.9}h1[_ngcontent-%COMP%]{font-weight:900;margin-bottom:32px}mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}mat-form-field[_ngcontent-%COMP%]{margin-bottom:12px}.mdc-button__label[_ngcontent-%COMP%]{display:block;margin:16px}@media only screen and (max-width: 900px){.login-container[_ngcontent-%COMP%]{justify-content:center}mat-card[_ngcontent-%COMP%]{width:80vw;min-width:80vw;margin-right:0}}']}),o})(),runGuardsAndResolvers:"always"}];let P=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[g.Bz.forChild(M),g.Bz]}),o})();var x=r(4088);let A=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[L.ez,P,x.m]}),o})()}}]);