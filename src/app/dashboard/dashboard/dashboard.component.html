<div class="dashboard-container">
    <div class="card">
        <div class="card-title">
            <h1>Total UKM & UMKM</h1>
        </div>
        <hr>

        <br>
        <b class="big_text">{{ totalUMKM }}</b><br>
        <b class="medium_text">UKM & UMKM</b>

    </div>

    <div class="card">
        <div class="card-title">
            <h1>Total Produk</h1>
        </div>
        <hr>
        <br>
        <b class="big_text">{{ totalItems }}</b><br>
        <b class="medium_text">Produk</b>
    </div>
    
    <div class="card card2" *ngIf="user.role == 'admin'">
        <div class="card-title">
            <h1>Produk Unggulan</h1>
            <div class="card-button">
                <button mat-flat-button style="background-color: #cccccc;" (click)="openDialogAddFav()" [disabled]="addfavItem">
                    <mat-icon>add</mat-icon>
                    <span>Tambah Produk Unggulan</span>
                </button>
            </div>
        </div>
        <hr>

        <div *ngIf="favItemList.length > 0">
            <table>
                <tr style="position: sticky; top: 0; background-color: white;">
                    <th width="5%">No</th>
                    <th width="15%">Foto Produk</th>
                    <th width="25%">Nama Produk</th>
                    <th width="20%">Kisaran Harga</th>
                    <th width="25%">Nama UKM/UMKM</th>
                </tr>
                <tr *ngFor="let item of favItemList; let i = index">
                    <ng-container *ngIf="i >= pageIndex * pageSize && i < (pageIndex * pageSize) + pageSize">
                        <td>{{ i+1 }}.</td>
                        <td>
                            <div class="item-selected-image">
                                <img [src]="item.src" 
                                    alt="" 
                                    *ngIf="item.src != ''" 
                                    width="100%" height="100%" 
                                    id="item-image-preview-a{{i}}"
                                    (click)="openDialogImage('item-image-preview-a' + i)">
                                <img src="/assets/images/placeholder.png" 
                                    alt="" 
                                    *ngIf="item.src == ''" 
                                    width="100%" height="100%" 
                                    id="item-image-preview-b{{i}}"
                                    (click)="openDialogImage('item-image-preview-b' + i)">
                            </div>
                        </td>
                        <td>{{ item.item }}</td>
                        <td>{{ item.price != "Gratis" ? "Rp. " + item.price : "Gratis" }}</td>
                        <td>{{ item.umkm }}</td>
                    </ng-container>
                </tr>
            </table>
            <br>
            <div class="paginator">
                <mat-paginator [length]="favItemList.length"
                    (page)="handlePageEvent($event)"
                    [pageSize]="5"
                    [pageSizeOptions]="[5, 10]"
                    [showFirstLastButtons]="true"
                    aria-label="Select page">
                </mat-paginator>
            </div>
        </div>
        <div *ngIf="favItemList.length <= 0">
            <h1 style="text-align: center; padding: 16px;">Belum ada produk unggulan</h1>
        </div>
        
    </div>
</div>