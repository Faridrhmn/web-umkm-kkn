"use strict";(self.webpackChunkweb_umkm_tanjungrejo=self.webpackChunkweb_umkm_tanjungrejo||[]).push([[872],{9872:(U,p,r)=>{r.r(p),r.d(p,{LoginModule:()=>A});var L=r(6895),g=r(9299),f=r(5861),s=r(4006),C=r(259),u=r(7396),Z=r(6985),b=r(5226),i=r.n(b),n=r(4650),h=r(4859),y=r(3546),T=r(7392),M=r(4144),c=r(9549);const P=[{path:"",component:(()=>{class o{constructor(e,t){this.fb=e,this.router=t,this.hide=!0,this.loginForm=this.initFormGroup()}initFormGroup(){return this.fb.group({username:["",[s.kI.required]],password:["",[s.kI.required]]})}login(){var e=this;return(0,f.Z)(function*(){const t=e.loginForm.value;if(e.loginForm.invalid)e.onError("null");else{i().fire({didOpen:()=>{i().showLoading()},title:"Sedang Memuat...",text:"Harap tunggu sebentar"});const a=(0,C.ZF)(Z.N.firebase),l=(0,u.ad)(a),m=(0,u.IO)((0,u.hJ)(l,"users"),(0,u.ar)("username","==",t.username)),v=yield(0,u.PL)(m);if(v.size>0){const O=yield e.hashPassword(t.password);v.forEach(w=>{O===w.data().password?e.onSuccess(w):e.onError("password")})}else e.onError("username")}})()}onSuccess(e){const t=i().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:l=>{l.addEventListener("mouseenter",i().stopTimer),l.addEventListener("mouseleave",i().resumeTimer)}});localStorage.setItem("login-token",this.generateToken(12)),i().close(),t.fire({icon:"success",title:"Login Berhasil!"});const a={username:e.data().username,fullname:e.data().fullname,role:e.data().role,id:e.id,password:e.data().password};localStorage.setItem("user",JSON.stringify(a)),this.router.navigate(["/"])}onError(e){switch(i().close(),e){case"username":i().fire({icon:"error",title:"Login Gagal!",text:"Username tidak ditemukan"});break;case"null":i().fire({icon:"error",title:"Login Gagal!",text:"Username dan Password tidak boleh kosong"});break;case"password":i().fire({icon:"error",title:"Login Gagal!",text:"Username atau Password salah"})}}generateToken(e){let t="";const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=a.length;let m=0;for(;m<e;)t+=a.charAt(Math.floor(Math.random()*l)),m+=1;return t}handleKeyPress(e){console.log("\n"==e?"true":"false")}hashPassword(e){return(0,f.Z)(function*(){const a=(new TextEncoder).encode(e),l=yield crypto.subtle.digest("SHA-256",a);return Array.from(new Uint8Array(l)).map(m=>m.toString(16).padStart(2,"0")).join("")})()}}return o.\u0275fac=function(e){return new(e||o)(n.Y36(s.qu),n.Y36(g.F0))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-login"]],decls:24,vars:5,consts:[[1,"login-container"],[3,"formGroup"],[2,"font-size","32px","text-align","center"],[2,"text-align","center"],["appearance","fill"],["matInput","","placeholder","Username","formControlName","username",3,"keyup.enter"],["matSuffix",""],["matInput","","placeholder","Password","formControlName","password",3,"type","keyup.enter"],["password",""],["mat-icon-button","","matSuffix","",3,"click"],["mat-flat-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-content",1)(3,"h1",2),n._uU(4,"Admin Web Dusun Tanjungrejo"),n.qZA(),n.TgZ(5,"h1",3),n._uU(6,"Login"),n.qZA(),n.TgZ(7,"mat-form-field",4)(8,"mat-label"),n._uU(9,"Username"),n.qZA(),n.TgZ(10,"input",5),n.NdJ("keyup.enter",function(){return t.login()}),n.qZA(),n.TgZ(11,"mat-icon",6),n._uU(12,"person"),n.qZA(),n._UZ(13,"mat-hint"),n.qZA(),n.TgZ(14,"mat-form-field",4)(15,"mat-label"),n._uU(16,"Password"),n.qZA(),n.TgZ(17,"input",7,8),n.NdJ("keyup.enter",function(){return t.login()}),n.qZA(),n.TgZ(19,"button",9),n.NdJ("click",function(){return t.hide=!t.hide}),n.TgZ(20,"mat-icon"),n._uU(21),n.qZA()()(),n.TgZ(22,"button",10),n.NdJ("click",function(){return t.login()}),n._uU(23,"LOGIN"),n.qZA()()()()),2&e&&(n.xp6(2),n.Q6J("formGroup",t.loginForm),n.xp6(15),n.Q6J("type",t.hide?"password":"text"),n.xp6(2),n.uIk("aria-label","Hide password")("aria-pressed",t.hide),n.xp6(2),n.Oqu(t.hide?"visibility_off":"visibility"))},dependencies:[h.lW,h.RK,y.a8,y.dn,T.Hw,M.Nt,c.KE,c.hX,c.bx,c.R9,s.Fj,s.JJ,s.JL,s.sg,s.u],styles:['@import"https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap";*[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:not(mat-icon){font-family:Ubuntu,Helvetica Neue,sans-serif}.login-container[_ngcontent-%COMP%]{width:100vw;height:100vh;display:flex;background-image:url(/assets/images/bg.png);background-size:cover;background-position:bottom center;align-items:center;justify-content:center}mat-card[_ngcontent-%COMP%]{width:32vw;min-width:32vw;padding:32px;opacity:.9}h1[_ngcontent-%COMP%]{font-weight:900;margin-bottom:32px}mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}mat-form-field[_ngcontent-%COMP%]{margin-bottom:12px}.mdc-button__label[_ngcontent-%COMP%]{display:block;margin:16px}@media only screen and (max-width: 900px){.login-container[_ngcontent-%COMP%]{justify-content:center}mat-card[_ngcontent-%COMP%]{width:80vw;min-width:80vw;margin-right:0}}']}),o})(),runGuardsAndResolvers:"always"}];let x=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[g.Bz.forChild(P),g.Bz]}),o})();var k=r(4088);let A=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[L.ez,x,k.m]}),o})()}}]);